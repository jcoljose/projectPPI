// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Paciente {
  cpf                                    String                   @id
  email                                  String
  senha                                  String
  telefone                               String
  nomeCompleto                           String
  dataDeNascimento                       DateTime
  sexo                                   String
  altura                                 Float?
  peso                                   Float?
  dataCriado                             DateTime                 @default(now())

  consulta Consulta[]

  @@map("paciente")
}

model Medico {
  crm                                    String                   @id
  telefone                               String
  nomeCompleto                           String
  dataDeNascimento                       DateTime

  especialidade                          Especialidade            @relation(fields: [especialidadeId], references: [id])
  especialidadeId                        Int

  diasAtendimento                        DiasAtendimento[]
  horariosAtendimento                    HorariosAtendimento[]
  calendario                             Calendario[]
  consulta                               Consulta[]

  @@map("medico")
}

model Especialidade {
  id                                     Int                      @id @default(autoincrement())
  especialidade                          String

  medico                                 Medico[]
}

model DiasAtendimento {
  id                                     Int                      @id @default(autoincrement())
  dias                                   String

  calendario                             Calendario[]
  medico                                 Medico[]
}

model HorariosAtendimento {
  id                                     Int                      @id @default(autoincrement())
  horarios                               String

  calendario                             Calendario[]
  medico                                 Medico[]
}

model Calendario {
  id                                     Int                      @id @default(autoincrement())
  diaMensal                              Int
  mesAnual                               Int
  
  diasAtendimento                        DiasAtendimento          @relation(fields: [diasAtendimentoId], references: [id])
  diasAtendimentoId                      Int

  horariosAtendimento                    HorariosAtendimento[]

  medico                                 Medico                   @relation(fields: [medicoCrm], references: [crm])
  medicoCrm                              String

  consulta                               Consulta[]
}

model Consulta {
  id                                     Int                      @id @default(autoincrement())
  queixa                                 String
  descricaoMedica                        String
  prescricaoMedica                       String
  dataCriado                             DateTime                 @default(now())

  calendario                             Calendario               @relation(fields: [calendarioId], references: [id])
  calendarioId                           Int

  medico                                 Medico                   @relation(fields: [medicoCrm], references: [crm])
  medicoCrm                              String

  paciente                               Paciente                 @relation(fields: [pacienteCpf], references: [cpf])
  pacienteCpf                            String

  @@map("consulta")
}
