// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Paciente {
  cpf                                    String                   @id
  email                                  String
  senha                                  String
  nomeCompleto                           String
  telefone                               String
  dataDeNascimento                       DateTime
  sexo                                   String
  altura                                 Float?
  peso                                   Float?
  dataCriado                             DateTime                 @default(now())

  consulta Consulta[]

  @@map("paciente")
}

model Medico {
  crm                                    String                   @id
  nomeCompleto                           String
  telefone                               String
  dataDeNascimento                       DateTime

  especialidade                          Especialidade            @relation(fields: [especialidadeId], references: [id])
  especialidadeId                        Int
  
  diasAtendimento                        DiasAtendimento[]

  horariosAtendimento                    HorariosAtendimento[]

  calendario                             Calendario[]

  consulta                               Consulta[]

  @@map("medico")
}

model Especialidade {
  id                                     Int                      @id @default(autoincrement())
  especialidade                          String

  medico                                 Medico[]

  calendario                             Calendario[]

  @@map("especialidade")
}

model Consulta {
  id                                     Int                      @id @default(autoincrement())
  queixa                                 String

  paciente                               Paciente                 @relation(fields: [pacienteCpf], references: [cpf])
  pacienteCpf                            String

  medico                                 Medico                   @relation(fields: [medicoCrm], references: [crm])
  medicoCrm                              String

  descricaoMedica                        String
  prescricaoMedica                       String

  calendario                             Calendario               @relation(fields: [calendarioId], references: [id])
  calendarioId                           Int

  dataCriado                             DateTime                 @default(now())

  @@map("consulta")
}

model Calendario {
  id                                     Int                      @id @default(autoincrement())
 
  medico                                 Medico                   @relation(fields: [medicoCrm], references: [crm])
  medicoCrm                              String

  especialidade                          Especialidade            @relation(fields: [especialidadeId], references: [id])
  especialidadeId                        Int

  mesAnual                               MesAnual                 @relation(fields: [mesAnualId], references: [id])
  mesAnualId                             Int

  diaMensal                              DiaMensal                @relation(fields: [diaMensalId], references: [id])
  diaMensalId                            Int
  
  diasAtendimento                        DiasAtendimento          @relation(fields: [diasAtendimentoId], references: [id])
  diasAtendimentoId                      Int

  horariosAtendimento                    HorariosAtendimento[]

  consulta                               Consulta[]

  @@map("calendario")
}

model DiasAtendimento {
  id                                     Int                      @id @default(autoincrement())
  dias                                   String

  medico                                 Medico[]

  calendario                             Calendario[]

  @@map("diaAtendimento")
}

model HorariosAtendimento {
  id                                     Int                      @id @default(autoincrement())
  horarios                               String

  medico                                 Medico[]

  calendario                             Calendario[]

  @@map("horarioAtendimento")
}

model DiaMensal {
  id                                     Int                      @id @default(autoincrement())
  diaMensal                              Int

  calendario                             Calendario[]

  @@map("diaMensal")
}

model MesAnual {
  id                                     Int                      @id @default(autoincrement())
  mesAnual                               Int

  calendario                             Calendario[]

  @@map("mesAnual")
}
